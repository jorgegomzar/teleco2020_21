#!/bin/bash
#Juan I. Asensio
#2014-03-14
#ETSI Telecomunicacion - Universidad de Valladolid
#
#Script for collecting samples of different sizes generated by 
#queue-m_m_1 and for computing sample means
#
#The script receives two parameters
#$1 number of samples
#$2 sample size

#Trace file name
TRACEFILE=sweep-samples-tmp.trace
#Number of generated xgraph
TITLE="Medias muestrales"

#If trace file exists, it is deleted
if [ -e $TRACEFILE ]
then
  /bin/rm $TRACEFILE
fi

#Duration of simulations (2000 is just a sample... it is not actually a good choice)
tmax=2000;


for (( sample=1; sample<=$1; sample++))
do
  aggregator="";
  for (( sampleelement=1; sampleelement<=$2; sampleelement++))
  do
	datetime=`date +%D%t%T`
        echo "$datetime	Ejecutando simul. $sampleelement para muestra $sample"
  	output=`Debug/queue-mm1-mg1 --tmax=$tmax --rep=$RANDOM`
	aggregator="$aggregator	$output"
  done
  echo $aggregator >> $TRACEFILE
done


